<?xml version="1.0" encoding="UTF-8"?>

<!-- 문서 유형에 mapper를 설정해야 하고, XML 정의 파일은 Mapper의 정의를 가져오도록 설정함 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- SQL문들은 <mapper>와 </mapper> 사이에 해당 문장 유형의 요소를 사용하여 정의함 -->
<!-- mapper 요소의 namespace 속성에는 매퍼 인터페이스의 패키지이름이 포함된 전체이름을 설정함 -->
<mapper namespace="com.team3.rc_pro.mapper.PostInfoMapper">

<!-- 각 문장 유형 요소의 id 속성의 값은, 해당 문장을 호출하는 메퍼-인터페이스의 메소드 이름과 동일해야 함 -->

<!-- 게시물 조회 - 목록 -->
	<select id="selectPost" resultType="com.team3.rc_pro.domain.PostInfoVO">
		SELECT *
		FROM rc_pro.post_info
		ORDER BY post_view DESC
	</select>
	
	<insert id="insertPost">
		<selectKey order="BEFORE" keyProperty="post_id" resultType="int">
			SELECT rc_pro.seq_postid.NEXTVAL FROM dual
		</selectKey>
		INSERT INTO rc_pro.post_info
		VALUES (#{post_id}, #{category_id}, #{region_id}, #{user_num}, #{post_title}, #{post_content}, SYSDATE, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 0)
	</insert>

	<!-- 특정회원이 작성한 게시물 조회 -->
	<select id="selectPostinfo" resultType="com.team3.rc_pro.domain.PostInfoVO">
		SELECT post_id,post_title,post_view
		FROM rc_pro.post_info
		WHERE user_num=#{user_num}
		ORDER BY post_id ASC
	</select>
	
	<!-- 회원 번호로 즐겨찾기 정보 조회 -->
	<select id="selectScrapeinfo" resultType="com.team3.rc_pro.domain.PostInfoVO">
		SELECT post_id,category_id,region_id
		FROM rc_pro.scrape_info
		WHERE user_num=#{user_num}
		ORDER BY region_id ASC
	</select>
	
	<!-- 글번호로 글정보 조회  -->
	<select id="selectPostinfo2" resultType="com.team3.rc_pro.domain.PostInfoVO">
		SELECT category_id,region_id,post_title,post_view
		FROM rc_pro.post_info
		WHERE post_id=#{post_id}
		ORDER BY post_id ASC
	</select>	
</mapper>