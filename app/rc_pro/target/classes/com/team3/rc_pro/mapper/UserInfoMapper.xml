<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.team3.rc_pro.mapper.UserInfoMapper">

	<resultMap id="authorityinfoMap" type="com.team3.rc_pro.domain.AuthorityInfoVO">
		<result property="user_num" column="USER_NUM"/>
		<result property="user_authority" column="USER_AUTHORITY"/>
	</resultMap>

	<resultMap id="userinfoMap" type="com.team3.rc_pro.domain.UserInfoVO">
		<result property="user_num" column="USER_NUM" />
		<result property="user_name" column="USER_NAME" />
		<result property="user_birth" column="USER_BIRTH" />
		<result property="user_pn" column="USER_PN" />
		<result property="user_address" column="USER_ADDRESS" />
		<result property="user_email" column="USER_EMAIL" />
		<result property="user_id" column="USER_ID" />
		<result property="user_passwd" column="USER_PASSWD"/>
		<result property="user_regdate" column="USER_REGDATE" />
		
		<collection property="authorityList" resultMap="authorityinfoMap"/>
	</resultMap>

<!-- 게시물 조회 - 목록 -->
	<!-- 게시물 조회 - 목록 -->
	<select id="selectUserInfo" resultMap="userinfoMap">
		SELECT u.*, a.user_authority
		FROM user_info u, authority_info a
		WHERE u.user_num = a.user_num
		AND u.user_id = #{user_id}
	</select>
	
	<insert id="insertUserInfo">
		INSERT INTO user_info
		VALUES(#{user_num}, #{user_name}, #{user_birth}, #{user_pn}, 
		       #{user_address}, #{user_email},
		       #{user_id}, #{user_passwd}, DEFAULT)
	</insert>
	
	<insert id="insertAuthorityInfo">
		INSERT INTO authority_info
		VALUES(#{user_num}, #{user_authority})
	</insert>

	<select id="selectUserInfoAddress" resultMap="userinfoMap">
		SELECT user_address
		FROM user_info
		WHERE user_id = #{user_id}
	</select>
	

</mapper>